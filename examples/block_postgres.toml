# Example layout using PostgresDataSource
#
# Requires a running Postgres server with the mint_test database.
# See tests/postgres.rs for test data setup.
#
# Example usage:
#   mint build examples/block_postgres.toml -p '{"database":{"url":"postgres://localhost/mint_test"},"query":{"template":"SELECT json_object_agg(name, value)::text FROM config WHERE variant = $1"}}' -v Debug/Default

[settings]
endianness = "little"

[pg_block.header]
start_address = 0x1000
length = 0x100
padding = 0xFF

[pg_block.data]
# Single numeric values from Postgres
limits.temperature_max = { name = "TemperatureMax", type = "i16" }
config.value2 = { name = "Value2", type = "u32" }
config.enabled = { name = "enabled", type = "u8" }

# 1D array from native JSON array
calibration.array = { name = "nativeArray1d", type = "u32", size = 3 }

# 1D array parsed from space-delimited string
calibration.from_string = { name = "arraySpaces", type = "u32", size = 4 }

# Literal string
device.label = { name = "literalString", type = "u8", size = 16 }

# 2D array from native JSON array of arrays
matrix.data = { name = "nativeArray2d", type = "u16", size = [3, 2] }
