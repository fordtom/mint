# Example layout file demonstrating all features.
# See blocks.h for corresponding C struct.

[settings]
endianness = "little"

[settings.crc]
polynomial = 0x04C11DB7
start = 0xFFFFFFFF
xor_out = 0xFFFFFFFF
ref_in = true
ref_out = true
area = "data"

[config.header]
start_address = 0x8000
length = 0x100

[config.header.crc]
location = "end"

[config.data]
# Literal scalar
device.id = { value = 0x1234, type = "u32" }
# String from data source
device.name = { name = "DeviceName", type = "u8", size = 16 }
# Scalar from data source
version = { name = "Version", type = "u16" }
# Bitmap with mixed sources
flags = { type = "u16", bitmap = [
    { bits = 1, name = "EnableDebug" },
    { bits = 3, value = 0 },
    { bits = 4, name = "RegionCode" },
    { bits = 8, value = 0 },
] }
# 1D array from data source
coefficients = { name = "Coefficients", type = "f32", size = 4 }
# 2D array (e.g., 2x2 matrix)
matrix = { name = "Matrix", type = "i16", size = [2, 2] }

[data.header]
start_address = 0x8100
length = 0x100

[data.header.crc]
location = 0x81F0

[data.data]
# Scalar from data source
counter = { name = "Counter", type = "u64" }
# Literal string
message = { value = "Hello", type = "u8", size = 16 }
# Literal 1D array
ip = { value = [192, 168, 1, 1], type = "u8", size = 4 }
